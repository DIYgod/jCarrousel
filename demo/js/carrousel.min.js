!function(a){a.carrousel=function(b,c){this.$el=a(c),this._init(b)},a.carrousel.defaults={current:0,autoplay:!0,interval:3e3},a.carrousel.prototype={_init:function(b){this.options=a.extend(!0,{},a.carrousel.defaults,b),this.support3d=Modernizr.csstransforms3d,this.support2d=Modernizr.csstransforms,this.$wrapper=this.$el.find(".dg-wrapper"),this.$items=this.$wrapper.children(),this.itemsCount=this.$items.length,this.$nav=this.$el.find("nav"),this.$navPrev=this.$nav.find(".dg-prev"),this.$navNext=this.$nav.find(".dg-next"),this.button=a("#lightButton li"),this.box=a(".banner"),this.indexB=0,this.CSSX=0,this.CSSXout=0,this.button[0].classList.add("light"),this.current=this.options.current,this.isAnim=!1,this.$items.css({opacity:1}),this._updateWidth(),this._layout(),this._loadEvents(),this.options.autoplay&&this._startSlideshow();for(var c=this,d=0,e=this.button.length;e>d;d++)this.button[d].addEventListener("click",function(){var a=parseInt(this.getAttribute("index")),b=a-c.indexB;switch(b){case 0:break;case 1:c._navigate("next","dg-transition");break;case-1:c._navigate("prev","dg-transition");break;default:c._stopSlideshow();var d=setInterval(function(){c.isAnim||(b?b>0?(c._navigate("next","dg-transition-fast"),b--):0>b&&(c._navigate("prev","dg-transition-fast"),b++):(clearInterval(d),c.options.autoplay&&c._startSlideshow()))},0)}})},_updateWidth:function(){this.support3d?document.body.clientWidth<1300?(this.CSSX=(a(this.box).width()-500)/2,this.CSSXout=a(this.box).width()/10):document.body.clientWidth>=1300&&document.body.clientWidth<=1500?(this.CSSX=(a(this.box).width()-700)/1.8,this.CSSXout=(a(this.box).width()-500)/1.3):(this.CSSX=(a(this.box).width()-700)/1.9,this.CSSXout=(a(this.box).width()-500)/1.4):this.support2d&&(document.body.clientWidth<1464?(this.CSSX=(a(this.box).width()-10)/2-315,this.CSSXout=0):document.body.clientWidth>=1464&&(this.CSSX=.7*((a(this.box).width()-10)/2-280),this.CSSXout=(a(this.box).width()-10)/2-280))},_showButton:function(){for(var a=this,b=0,c=a.button.length;c>b;b++)if(a.button[b].classList.contains("light")){a.button[b].classList.remove("light");break}a.button[a.indexB].classList.add("light")},_click:function(a,b){var c=this;a.off("click.gallery"),a.on("click.gallery",function(){this.isAnim||(c._navigate(b),c.options.autoplay&&c._startSlideshow())})},_layout:function(){this._setItems(),this.$leftItm.css(this._getCoordinates("left")),this.$rightItm.css(this._getCoordinates("right")),this.$currentItm.css(this._getCoordinates("center")).addClass("dg-center"),this._click(this.$leftItm,"prev"),this._click(this.$prevItm,"prev"),this.$currentItm.off("click.carrousel"),this._click(this.$rightItm,"next"),this._click(this.$nextItm,"next"),this.$nextItm.css(this._getCoordinates("outright")),this.$prevItm.css(this._getCoordinates("outleft")),this.$currentItm[0].href=this.$currentItm[0].getAttribute("link")},_setItems:function(){this.$items.removeClass("dg-center"),this.$currentItm=this.$items.eq(this.current),this.$leftItm=0===this.current?this.$items.eq(this.itemsCount-1):this.$items.eq(this.current-1),this.$rightItm=this.current===this.itemsCount-1?this.$items.eq(0):this.$items.eq(this.current+1),this.$nextItm=this.$rightItm.index()===this.itemsCount-1?this.$items.eq(0):this.$rightItm.next(),this.$prevItm=0===this.$leftItm.index()?this.$items.eq(this.itemsCount-1):this.$leftItm.prev()},_loadEvents:function(){var a=this;this.$navPrev.on("click.carrousel",function(){return a._navigate("prev"),!1}),this.$navNext.on("click.carrousel",function(){return a._navigate("next"),!1}),this.$wrapper.on("webkitTransitionEnd.carrousel transitionend.carrousel OTransitionEnd.carrousel",function(){a.$currentItm.addClass("dg-center"),a.$items.removeClass("dg-transition"),a.$items.removeClass("dg-transition-fast"),a.isAnim=!1,a.$currentItm[0].href=a.$currentItm[0].getAttribute("link"),a.$leftItm[0].href="#",a.$rightItm[0].href="#",a._click(a.$leftItm,"prev"),a._click(a.$prevItm,"prev"),a.$currentItm.off("click.gallery"),a._click(a.$rightItm,"next"),a._click(a.$nextItm,"next")})},_getCoordinates:function(a){if(this.support3d)switch(a){case"outleft":return{"-webkit-transform":"translateX(-"+this.CSSXout+"px) translateZ(-560px) rotateY(45deg)","-moz-transform":"translateX(-"+this.CSSXout+"px) translateZ(-560px) rotateY(45deg)","-o-transform":"translateX(-"+this.CSSXout+"px) translateZ(-560px) rotateY(45deg)","-ms-transform":"translateX(-"+this.CSSXout+"px) translateZ(-560px) rotateY(45deg)",transform:"translateX(-"+this.CSSXout+"px) translateZ(-560px) rotateY(45deg)",opacity:1};case"outright":return{"-webkit-transform":"translateX("+this.CSSXout+"px) translateZ(-560px) rotateY(-45deg)","-moz-transform":"translateX("+this.CSSXout+"px) translateZ(-560px) rotateY(-45deg)","-o-transform":"translateX("+this.CSSXout+"px) translateZ(-560px) rotateY(-45deg)","-ms-transform":"translateX("+this.CSSXout+"px) translateZ(-560px) rotateY(-45deg)",transform:"translateX("+this.CSSXout+"px) translateZ(-560px) rotateY(-45deg)",opacity:1};case"left":return{"-webkit-transform":"translateX(-"+this.CSSX+"px) translateZ(-300px) rotateY(25deg)","-moz-transform":"translateX(-"+this.CSSX+"px) translateZ(-300px) rotateY(25deg)","-o-transform":"translateX(-"+this.CSSX+"px) translateZ(-300px) rotateY(25deg)","-ms-transform":"translateX(-"+this.CSSX+"px) translateZ(-300px) rotateY(25deg)",transform:"translateX(-"+this.CSSX+"px) translateZ(-300px) rotateY(25deg)",opacity:1,visibility:"visible"};case"right":return{"-webkit-transform":"translateX("+this.CSSX+"px) translateZ(-300px) rotateY(-25deg)","-moz-transform":"translateX("+this.CSSX+"px) translateZ(-300px) rotateY(-25deg)","-o-transform":"translateX("+this.CSSX+"px) translateZ(-300px) rotateY(-25deg)","-ms-transform":"translateX("+this.CSSX+"px) translateZ(-300px) rotateY(-25deg)",transform:"translateX("+this.CSSX+"px) translateZ(-300px) rotateY(-25deg)",opacity:1,visibility:"visible"};case"center":return{"-webkit-transform":"translateX(0px) translateZ(0px) rotateY(0deg)","-moz-transform":"translateX(0px) translateZ(0px) rotateY(0deg)","-o-transform":"translateX(0px) translateZ(0px) rotateY(0deg)","-ms-transform":"translateX(0px) translateZ(0px) rotateY(0deg)",transform:"translateX(0px) translateZ(0px) rotateY(0deg)",opacity:1,visibility:"visible"};case"hide":return{"-webkit-transform":"translate(0px) scale(0.7)",opacity:1,visibility:"visible","z-index":1}}else if(this.support2d)switch(a){case"outleft":return{"-webkit-transform":"translate(-"+this.CSSXout+"px) scale(0.8)","-moz-transform":"translate(-"+this.CSSXout+"px) scale(0.8)","-o-transform":"translate(-"+this.CSSXout+"px) scale(0.8)","-ms-transform":"translate(-"+this.CSSXout+"px) scale(0.8)",transform:"translate(-"+this.CSSXout+"px) scale(0.8)",opacity:1,"z-index":2};case"outright":return{"-webkit-transform":"translate("+this.CSSXout+"px) scale(0.8)","-moz-transform":"translate("+this.CSSXout+"px) scale(0.8)","-o-transform":"translate("+this.CSSXout+"px) scale(0.8)","-ms-transform":"translate("+this.CSSXout+"px) scale(0.8)",transform:"translate("+this.CSSXout+"px) scale(0.8)",opacity:1,"z-index":2};case"left":return{"-webkit-transform":"translate(-"+this.CSSX+"px) scale(0.9)","-moz-transform":"translate(-"+this.CSSX+"px) scale(0.9)","-o-transform":"translate(-"+this.CSSX+"px) scale(0.9)","-ms-transform":"translate(-"+this.CSSX+"px) scale(0.9)",transform:"translate(-"+this.CSSX+"px) scale(0.9)",opacity:1,visibility:"visible","z-index":3};case"right":return{"-webkit-transform":"translate("+this.CSSX+"px) scale(0.9)","-moz-transform":"translate("+this.CSSX+"px) scale(0.9)","-o-transform":"translate("+this.CSSX+"px) scale(0.9)","-ms-transform":"translate("+this.CSSX+"px) scale(0.9)",transform:"translate("+this.CSSX+"px) scale(0.9)",opacity:1,visibility:"visible","z-index":3};case"center":return{"-webkit-transform":"translate(0px) scale(1)","-moz-transform":"translate(0px) scale(1)","-o-transform":"translate(0px) scale(1)","-ms-transform":"translate(0px) scale(1)",transform:"translate(0px) scale(1)",opacity:1,visibility:"visible","z-index":4};case"hide":return{"-webkit-transform":"translate(0px) scale(0.7)","-moz-transform":"translate(0px) scale(0.7)","-o-transform":"translate(0px) scale(0.7)","-ms-transform":"translate(0px) scale(0.7)",transform:"translate(0px) scale(0.7)",opacity:1,visibility:"visible","z-index":1}}},_navigate:function(b,c){if(c=c||"dg-transition",!this.isAnim){this._updateWidth(),this.isAnim=!0;switch(b){case"next":this.indexB++,this.indexB===this.itemsCount&&(this.indexB=0),this._showButton(),this.current=this.$rightItm.index(),this.$currentItm.addClass(c).css(this._getCoordinates("left")),this.$rightItm.addClass(c).css(this._getCoordinates("center")),this.$leftItm.addClass(c).css(this._getCoordinates("outleft")),this.$nextItm.addClass(c).css(this._getCoordinates("right")),this.itemsCount>5&&(this.$prevItm.addClass(c).css(this._getCoordinates("hide")),this.$prevItm.off("click.carrousel"));var d=this.$nextItm.index()===this.itemsCount-1?this.$items.eq(0):this.$nextItm.next();a(d).addClass(c).css(this._getCoordinates("outright")),a(d).off("click.carrousel");break;case"prev":this.indexB--,-1===this.indexB&&(this.indexB=this.itemsCount-1),this._showButton(),this.current=this.$leftItm.index(),this.$currentItm.addClass(c).css(this._getCoordinates("right")),this.$leftItm.addClass(c).css(this._getCoordinates("center")),this.$rightItm.addClass(c).css(this._getCoordinates("outright")),this.$prevItm.addClass(c).css(this._getCoordinates("left")),this.itemsCount>5&&(this.$nextItm.addClass(c).css(this._getCoordinates("hide")),this.$nextItm.off("click.carrousel"));var e=0===this.$prevItm.index()?this.$items.eq(this.itemsCount-1):this.$prevItm.prev();a(e).addClass(c).css(this._getCoordinates("outleft")),a(e).off("click.carrousel")}this._setItems()}},_startSlideshow:function(){var b=this;this.slideshow=setInterval(function(){a(".dg-center")[0]&&!b.isAnim&&b._navigate("next")},this.options.interval)},_stopSlideshow:function(){clearTimeout(this.slideshow)}},a.fn.carrousel=function(b){return"object"==typeof b?this.each(function(){var c=a.data(this,"carrousel");c||a.data(this,"carrousel",new a.carrousel(b,this))}):"string"==typeof b?this.each(function(){var c=a.data(this,"carrousel");if(c)switch(b){case"play":c._startSlideshow(),c.options.autoplay=!0;break;case"stop":c._stopSlideshow(),c.options.autoplay=!1;break;case"next":c._navigate("next");break;case"prev":c._navigate("prev")}}):"number"==typeof b&&this.each(function(){var c=a.data(this,"carrousel");c.button[b].click()}),this}}(jQuery);